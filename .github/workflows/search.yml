name: Find a bug

on:
  push:
  workflow_dispatch:

jobs:
  search:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        revision:
          - a3430e7ec1d6c2cc883b7e5079c1a0e096f2eb66
          - fa1d1c8ddd61f99d46dee28f9e080a43d3d47034
          - 9267bbf1fcd783278d820efa7e02e9357f962cc6
      fail-fast: false
    steps:
      - uses: actions/checkout@v2
        with:
          fetch-depth: 2000
      - uses: actions/cache@v2
        env:
          cache-name: cache-srccache
        with:
          path: deps/srccache
          key: ${{ env.cache-name }}

      - run: cp test.sh /tmp/test.sh
      - run: cp -r Repro /tmp/
      - run: git checkout ${{ matrix.revision }}
      - run: /tmp/test.sh
